<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CGM Simulator: Calibration Feature</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="styleSheetFile.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CGM Simulator
   &#160;<span id="projectnumber">1.0.2</span>
   </div>
   <div id="projectbrief">A CGM simulator to demonstrate the BLE CGM profile v1.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__calibrationgrp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Calibration Feature<div class="ingroups"><a class="el" href="group__cgmcpgrp.html">CGM Specific Control Point (CGMCP)</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This is a group of constants, variables, functions related to the calibration feature.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Calibration Feature:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__calibrationgrp.png" border="0" alt="" usemap="#group____calibrationgrp"/>
<map name="group____calibrationgrp" id="group____calibrationgrp">
<area shape="rect" id="node1" href="group__cgmcpgrp.html" title="This group contains modules falling into the CGMCP. " alt="" coords="7,5,156,51"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The container for holding a glucose calibration structure.  <a href="structcgmCalibrationDataRecord__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad8944565f4f691030d39da33358dff8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#gad8944565f4f691030d39da33358dff8d">CALIBRATION_CONCENTRATION_MAX</a>&#160;&#160;&#160;300</td></tr>
<tr class="memdesc:gad8944565f4f691030d39da33358dff8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximal value of input calibration concentration value.  <a href="#gad8944565f4f691030d39da33358dff8d">More...</a><br/></td></tr>
<tr class="separator:gad8944565f4f691030d39da33358dff8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84156e1307f300d587c3d6198bd693f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga84156e1307f300d587c3d6198bd693f6">CALIBRATION_CONCENTRATION_MIN</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:ga84156e1307f300d587c3d6198bd693f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The minimal value of input calibration concentration value.  <a href="#ga84156e1307f300d587c3d6198bd693f6">More...</a><br/></td></tr>
<tr class="separator:ga84156e1307f300d587c3d6198bd693f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32c861cec415ebfc0ab5065b14571408"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga32c861cec415ebfc0ab5065b14571408">CALIBRATION_DATABASE_SIZE</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:ga32c861cec415ebfc0ab5065b14571408"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the circular database to store the calibration records.  <a href="#ga32c861cec415ebfc0ab5065b14571408">More...</a><br/></td></tr>
<tr class="separator:ga32c861cec415ebfc0ab5065b14571408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1319e8959b8f242ad4cf9f6267cf8abc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga1319e8959b8f242ad4cf9f6267cf8abc">CALIBRATION_INTERVAL</a>&#160;&#160;&#160;360</td></tr>
<tr class="memdesc:ga1319e8959b8f242ad4cf9f6267cf8abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The recommended duration between calibrations. The default value is 360 mins (6 hrs)  <a href="#ga1319e8959b8f242ad4cf9f6267cf8abc">More...</a><br/></td></tr>
<tr class="separator:ga1319e8959b8f242ad4cf9f6267cf8abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ff2daca400dd43384c8a0f01c2fe0ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga3ff2daca400dd43384c8a0f01c2fe0ae">CALIBRATION_TIME_TOLERANCE</a>&#160;&#160;&#160;60</td></tr>
<tr class="memdesc:ga3ff2daca400dd43384c8a0f01c2fe0ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">The tolerance of time when the calibration data is deemed as acceptable. The default value is 60 mins (1 hr)  <a href="#ga3ff2daca400dd43384c8a0f01c2fe0ae">More...</a><br/></td></tr>
<tr class="separator:ga3ff2daca400dd43384c8a0f01c2fe0ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa9a047fd5c00f146f8fec275af0e4f5c"><td class="memItemLeft" align="right" valign="top">static int8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#gaa9a047fd5c00f146f8fec275af0e4f5c">cgmCaliAddRecord</a> (<a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a> *inputrecord)</td></tr>
<tr class="memdesc:gaa9a047fd5c00f146f8fec275af0e4f5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the input record to the calibration data record database ( cgmCaliDB )  <a href="#gaa9a047fd5c00f146f8fec275af0e4f5c">More...</a><br/></td></tr>
<tr class="separator:gaa9a047fd5c00f146f8fec275af0e4f5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c7d990d6555f472a1f1d2bab553e84a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga3c7d990d6555f472a1f1d2bab553e84a">cgmCaliVerifyInput</a> (<a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a> *inputrecord, uint8 *result)</td></tr>
<tr class="memdesc:ga3c7d990d6555f472a1f1d2bab553e84a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify the input calibration record values.  <a href="#ga3c7d990d6555f472a1f1d2bab553e84a">More...</a><br/></td></tr>
<tr class="separator:ga3c7d990d6555f472a1f1d2bab553e84a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f19512441a655a7ce748e01d5b0499e"><td class="memItemLeft" align="right" valign="top">static int8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga8f19512441a655a7ce748e01d5b0499e">cgmCaliProcessCalibration</a> (void)</td></tr>
<tr class="memdesc:ga8f19512441a655a7ce748e01d5b0499e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the calibration data. This is a place holder for implementing the actual calibration procedure of the sensor device.  <a href="#ga8f19512441a655a7ce748e01d5b0499e">More...</a><br/></td></tr>
<tr class="separator:ga8f19512441a655a7ce748e01d5b0499e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a7632600e3c8b37259077835f8677c6"><td class="memItemLeft" align="right" valign="top">static int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga8a7632600e3c8b37259077835f8677c6">cgmCaliTestCalibration</a> (<a class="el" href="cgm_8c.html#abefc6f1a65d13a2784041178e96b9790">SFLOAT</a> currentConcentration)</td></tr>
<tr class="memdesc:ga8a7632600e3c8b37259077835f8677c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function tests whether the CGM needs calibration.  <a href="#ga8a7632600e3c8b37259077835f8677c6">More...</a><br/></td></tr>
<tr class="separator:ga8a7632600e3c8b37259077835f8677c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55f3cacf30d0753a03754fa9c157878a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga55f3cacf30d0753a03754fa9c157878a">cgmResetCaliDB</a> (void)</td></tr>
<tr class="memdesc:ga55f3cacf30d0753a03754fa9c157878a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the calibration data record database.  <a href="#ga55f3cacf30d0753a03754fa9c157878a">More...</a><br/></td></tr>
<tr class="separator:ga55f3cacf30d0753a03754fa9c157878a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8af27597f8b33df95d18a6f5e516c39d"><td class="memItemLeft" align="right" valign="top">static int16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga8af27597f8b33df95d18a6f5e516c39d">cgmCaliDBSearch</a> (uint16 recordnum)</td></tr>
<tr class="memdesc:ga8af27597f8b33df95d18a6f5e516c39d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search the calibration record according to the record number.  <a href="#ga8af27597f8b33df95d18a6f5e516c39d">More...</a><br/></td></tr>
<tr class="separator:ga8af27597f8b33df95d18a6f5e516c39d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga2043926e8a2d9252f872c7e19c1b0cc1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga2043926e8a2d9252f872c7e19c1b0cc1">cgmCaliDB</a></td></tr>
<tr class="memdesc:ga2043926e8a2d9252f872c7e19c1b0cc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the calibration record database.  <a href="#ga2043926e8a2d9252f872c7e19c1b0cc1">More...</a><br/></td></tr>
<tr class="separator:ga2043926e8a2d9252f872c7e19c1b0cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7c85c9b550d7b546d3bf7b2d2887789"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#gad7c85c9b550d7b546d3bf7b2d2887789">cgmCaliTmpRecord</a></td></tr>
<tr class="memdesc:gad7c85c9b550d7b546d3bf7b2d2887789"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary record for holding a calibration record.  <a href="#gad7c85c9b550d7b546d3bf7b2d2887789">More...</a><br/></td></tr>
<tr class="separator:gad7c85c9b550d7b546d3bf7b2d2887789"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed9696ea02a7686a3860c07eea8b4e65"><td class="memItemLeft" align="right" valign="top">static uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#gaed9696ea02a7686a3860c07eea8b4e65">cgmCaliDBCount</a></td></tr>
<tr class="memdesc:gaed9696ea02a7686a3860c07eea8b4e65"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of records being stored into the database.  <a href="#gaed9696ea02a7686a3860c07eea8b4e65">More...</a><br/></td></tr>
<tr class="separator:gaed9696ea02a7686a3860c07eea8b4e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f9584860ae5963a7c9908693c9ee4df"><td class="memItemLeft" align="right" valign="top">static uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga3f9584860ae5963a7c9908693c9ee4df">cgmCaliDBOldestIndx</a></td></tr>
<tr class="memdesc:ga3f9584860ae5963a7c9908693c9ee4df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointing to the oldest records in the circular buffer.  <a href="#ga3f9584860ae5963a7c9908693c9ee4df">More...</a><br/></td></tr>
<tr class="separator:ga3f9584860ae5963a7c9908693c9ee4df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadedda7a8dbf1586601e2c9c9a8369c5f"><td class="memItemLeft" align="right" valign="top">static uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#gadedda7a8dbf1586601e2c9c9a8369c5f">cgmCaliDBWriteIndx</a></td></tr>
<tr class="memdesc:gadedda7a8dbf1586601e2c9c9a8369c5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointing to the next calibration record to write.  <a href="#gadedda7a8dbf1586601e2c9c9a8369c5f">More...</a><br/></td></tr>
<tr class="separator:gadedda7a8dbf1586601e2c9c9a8369c5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga57a0e51cc7eef0f0f54699b49b19c001"><td class="memItemLeft" align="right" valign="top">static uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga57a0e51cc7eef0f0f54699b49b19c001">cgmCaliDBRecordNum</a></td></tr>
<tr class="memdesc:ga57a0e51cc7eef0f0f54699b49b19c001"><td class="mdescLeft">&#160;</td><td class="mdescRight">The record number of the most recently stored calibration data record.  <a href="#ga57a0e51cc7eef0f0f54699b49b19c001">More...</a><br/></td></tr>
<tr class="separator:ga57a0e51cc7eef0f0f54699b49b19c001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89b09344fffb654b6b2f991066d48cf1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="cgm_8c.html#abefc6f1a65d13a2784041178e96b9790">SFLOAT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__calibrationgrp.html#ga89b09344fffb654b6b2f991066d48cf1">cgmCalibration</a></td></tr>
<tr class="memdesc:ga89b09344fffb654b6b2f991066d48cf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The most current calibration value.  <a href="#ga89b09344fffb654b6b2f991066d48cf1">More...</a><br/></td></tr>
<tr class="separator:ga89b09344fffb654b6b2f991066d48cf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This is a group of constants, variables, functions related to the calibration feature. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gad8944565f4f691030d39da33358dff8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALIBRATION_CONCENTRATION_MAX&#160;&#160;&#160;300</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The maximal value of input calibration concentration value. </p>

</div>
</div>
<a class="anchor" id="ga84156e1307f300d587c3d6198bd693f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALIBRATION_CONCENTRATION_MIN&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The minimal value of input calibration concentration value. </p>

</div>
</div>
<a class="anchor" id="ga32c861cec415ebfc0ab5065b14571408"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALIBRATION_DATABASE_SIZE&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The size of the circular database to store the calibration records. </p>

</div>
</div>
<a class="anchor" id="ga1319e8959b8f242ad4cf9f6267cf8abc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALIBRATION_INTERVAL&#160;&#160;&#160;360</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The recommended duration between calibrations. The default value is 360 mins (6 hrs) </p>

</div>
</div>
<a class="anchor" id="ga3ff2daca400dd43384c8a0f01c2fe0ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALIBRATION_TIME_TOLERANCE&#160;&#160;&#160;60</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The tolerance of time when the calibration data is deemed as acceptable. The default value is 60 mins (1 hr) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaa9a047fd5c00f146f8fec275af0e4f5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int8 cgmCaliAddRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a> *&#160;</td>
          <td class="paramname"><em>inputrecord</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the input record to the calibration data record database ( cgmCaliDB ) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">inputrecord</td><td>- the input record to be added </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><table class="doxtable">
<tr>
<td>0</td><td>Success</td></tr>
<tr>
<td>-1</td><td>Fail</td></tr>
</table>
</dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__calibrationgrp_gaa9a047fd5c00f146f8fec275af0e4f5c_icgraph.png" border="0" usemap="#group__calibrationgrp_gaa9a047fd5c00f146f8fec275af0e4f5c_icgraph" alt=""/></div>
<map name="group__calibrationgrp_gaa9a047fd5c00f146f8fec275af0e4f5c_icgraph" id="group__calibrationgrp_gaa9a047fd5c00f146f8fec275af0e4f5c_icgraph">
<area shape="rect" id="node3" href="group__cgmcpgrp.html#gabf9bd92004225c06fb287cd38df4917d" title="Process Control Point messages. " alt="" coords="189,5,347,35"/><area shape="rect" id="node5" href="group__appgrp.html#gae9e2667a47ab687cf120b7febeae6dd2" title="Process an incoming task message. " alt="" coords="395,5,557,35"/><area shape="rect" id="node7" href="group__appgrp.html#ga4cc841bb1551cb45b719f171fff26092" title="The routine to enable CGM application to process the system event. " alt="" coords="607,5,748,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga8af27597f8b33df95d18a6f5e516c39d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int16 cgmCaliDBSearch </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>recordnum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search the calibration record according to the record number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">recordnum</td><td>- the input record number to search </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index pointing to the resulting record, which ranges from 1 to CALIBRATION_DATABASE_SIZE. 0 if no record is found. </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__calibrationgrp_ga8af27597f8b33df95d18a6f5e516c39d_icgraph.png" border="0" usemap="#group__calibrationgrp_ga8af27597f8b33df95d18a6f5e516c39d_icgraph" alt=""/></div>
<map name="group__calibrationgrp_ga8af27597f8b33df95d18a6f5e516c39d_icgraph" id="group__calibrationgrp_ga8af27597f8b33df95d18a6f5e516c39d_icgraph">
<area shape="rect" id="node3" href="group__cgmcpgrp.html#gabf9bd92004225c06fb287cd38df4917d" title="Process Control Point messages. " alt="" coords="184,5,341,35"/><area shape="rect" id="node5" href="group__appgrp.html#gae9e2667a47ab687cf120b7febeae6dd2" title="Process an incoming task message. " alt="" coords="389,5,552,35"/><area shape="rect" id="node7" href="group__appgrp.html#ga4cc841bb1551cb45b719f171fff26092" title="The routine to enable CGM application to process the system event. " alt="" coords="601,5,743,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga8f19512441a655a7ce748e01d5b0499e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int8 cgmCaliProcessCalibration </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process the calibration data. This is a place holder for implementing the actual calibration procedure of the sensor device. </p>
<p>When this function is called, it always process the most recent calibration record. </p>
<dl class="section return"><dt>Returns</dt><dd><table class="doxtable">
<tr>
<td>0</td><td>Success</td></tr>
<tr>
<td>-1</td><td>Fail</td></tr>
</table>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes the presence of the local cgmCaliDB database variables. </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__calibrationgrp_ga8f19512441a655a7ce748e01d5b0499e_icgraph.png" border="0" usemap="#group__calibrationgrp_ga8f19512441a655a7ce748e01d5b0499e_icgraph" alt=""/></div>
<map name="group__calibrationgrp_ga8f19512441a655a7ce748e01d5b0499e_icgraph" id="group__calibrationgrp_ga8f19512441a655a7ce748e01d5b0499e_icgraph">
<area shape="rect" id="node3" href="group__cgmcpgrp.html#gabf9bd92004225c06fb287cd38df4917d" title="Process Control Point messages. " alt="" coords="235,5,392,35"/><area shape="rect" id="node5" href="group__appgrp.html#gae9e2667a47ab687cf120b7febeae6dd2" title="Process an incoming task message. " alt="" coords="440,5,603,35"/><area shape="rect" id="node7" href="group__appgrp.html#ga4cc841bb1551cb45b719f171fff26092" title="The routine to enable CGM application to process the system event. " alt="" coords="652,5,793,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga8a7632600e3c8b37259077835f8677c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int32 cgmCaliTestCalibration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cgm_8c.html#abefc6f1a65d13a2784041178e96b9790">SFLOAT</a>&#160;</td>
          <td class="paramname"><em>currentConcentration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function tests whether the CGM needs calibration. </p>
<p>This function is called in the <a class="el" href="group__glucosemeasgrp.html#ga8370c5150f948904ae5dec44ff71ab16" title="Update with the lastest reading while updating the internal database. ">cgmNewGlucoseMeas()</a>. If the method determines that calibration is needed, then the corresponding flag is set. </p>
<dl class="section return"><dt>Returns</dt><dd><table class="doxtable">
<tr>
<td>0</td><td>Success with no recommendation </td></tr>
<tr>
<td>-1</td><td>Fail </td></tr>
<tr>
<td>0x000000</td><td>Success with calibration not required </td></tr>
<tr>
<td>0x000200</td><td>Success with calibration required </td></tr>
<tr>
<td>0x000400</td><td>Success with calibration recommended </td></tr>
<tr>
<td>0x000800</td><td>Success with calibration is not allowed</td></tr>
</table>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes the presence of the local cgmCaliDB database variables. At the same time, the exponent of glucose concentration is 0 </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__calibrationgrp_ga8a7632600e3c8b37259077835f8677c6_icgraph.png" border="0" usemap="#group__calibrationgrp_ga8a7632600e3c8b37259077835f8677c6_icgraph" alt=""/></div>
<map name="group__calibrationgrp_ga8a7632600e3c8b37259077835f8677c6_icgraph" id="group__calibrationgrp_ga8a7632600e3c8b37259077835f8677c6_icgraph">
<area shape="rect" id="node3" href="group__glucosemeasgrp.html#ga8370c5150f948904ae5dec44ff71ab16" title="Update with the lastest reading while updating the internal database. " alt="" coords="213,5,368,35"/><area shape="rect" id="node5" href="group__appgrp.html#ga4cc841bb1551cb45b719f171fff26092" title="The routine to enable CGM application to process the system event. " alt="" coords="417,5,559,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3c7d990d6555f472a1f1d2bab553e84a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cgmCaliVerifyInput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a> *&#160;</td>
          <td class="paramname"><em>inputrecord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8 *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Verify the input calibration record values. </p>
<p>Upon successful execution of the function, if the input record does not pass the verification, the corresponding flag in the calibration status field will be set. The field values are reproduced as follow.<br/>
 </p>
<table class="doxtable">
<tr>
<th>bit</th><th>meaning </th></tr>
<tr>
<td>0</td><td>Calibration Data rejected (Calibration failed) </td></tr>
<tr>
<td>1</td><td>Calibration Data out of range </td></tr>
<tr>
<td>2</td><td>Calibration Process Pending </td></tr>
<tr>
<td>3-7</td><td>Reserved </td></tr>
</table>
<p><br/>
 At the same time, the <code>result</code> parameter forms a response to the COCP request, whose value is documented in the following table. </p>
<table class="doxtable">
<tr>
<th>Value</th><th>Meaning </th></tr>
<tr>
<td>1</td><td>Success </td></tr>
<tr>
<td>2</td><td>Opcode not supported </td></tr>
<tr>
<td>3</td><td>Invalid operand </td></tr>
<tr>
<td>4</td><td>Procedure not completed </td></tr>
<tr>
<td>5</td><td>Parameter out of range </td></tr>
</table>
<p>Currently, the function only takes in calibration data whose calibration time is before the current CGM Simulator time. Also a <code>Calibration Data reject</code> is set when the age of calibration data is beyond the tolerance. </p>
<dl class="section note"><dt>Note</dt><dd>The function assumes that the glucose concentration value has zero exponent </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*inputrecord</td><td>- a pointer to the record to be verified </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*result</td><td>- a pointer to the an unsigned integer to hold the result of verification <br/>
 The result should be compliant to the COCP result code values. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__calibrationgrp_ga3c7d990d6555f472a1f1d2bab553e84a_icgraph.png" border="0" usemap="#group__calibrationgrp_ga3c7d990d6555f472a1f1d2bab553e84a_icgraph" alt=""/></div>
<map name="group__calibrationgrp_ga3c7d990d6555f472a1f1d2bab553e84a_icgraph" id="group__calibrationgrp_ga3c7d990d6555f472a1f1d2bab553e84a_icgraph">
<area shape="rect" id="node3" href="group__cgmcpgrp.html#gabf9bd92004225c06fb287cd38df4917d" title="Process Control Point messages. " alt="" coords="187,5,344,35"/><area shape="rect" id="node5" href="group__appgrp.html#gae9e2667a47ab687cf120b7febeae6dd2" title="Process an incoming task message. " alt="" coords="392,5,555,35"/><area shape="rect" id="node7" href="group__appgrp.html#ga4cc841bb1551cb45b719f171fff26092" title="The routine to enable CGM application to process the system event. " alt="" coords="604,5,745,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga55f3cacf30d0753a03754fa9c157878a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cgmResetCaliDB </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the calibration data record database. </p>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__calibrationgrp_ga55f3cacf30d0753a03754fa9c157878a_icgraph.png" border="0" usemap="#group__calibrationgrp_ga55f3cacf30d0753a03754fa9c157878a_icgraph" alt=""/></div>
<map name="group__calibrationgrp_ga55f3cacf30d0753a03754fa9c157878a_icgraph" id="group__calibrationgrp_ga55f3cacf30d0753a03754fa9c157878a_icgraph">
<area shape="rect" id="node3" href="group__cgmcpgrp.html#gabf9bd92004225c06fb287cd38df4917d" title="Process Control Point messages. " alt="" coords="179,5,336,35"/><area shape="rect" id="node9" href="group__appgrp.html#gaa21434c720a4f0d6721b418ccc568a9b" title="Initialize the CGM simulator application. Reset the historical database. " alt="" coords="183,59,332,88"/><area shape="rect" id="node5" href="group__appgrp.html#gae9e2667a47ab687cf120b7febeae6dd2" title="Process an incoming task message. " alt="" coords="384,5,547,35"/><area shape="rect" id="node7" href="group__appgrp.html#ga4cc841bb1551cb45b719f171fff26092" title="The routine to enable CGM application to process the system event. " alt="" coords="596,5,737,35"/><area shape="rect" id="node11" href="group__appgrp.html#gacba44e75a8e99cc3b2b3a4601e38d5c3" title="The routine to iniialize the CGM simulator. " alt="" coords="427,59,504,88"/><area shape="rect" id="node13" href="OSAL__Cgm_8c.html#a7ad49ef9f96d7753c3e77e0e69231bb2" title="This function invokes the initialization function for each task. " alt="" coords="617,59,716,88"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga89b09344fffb654b6b2f991066d48cf1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cgm_8c.html#abefc6f1a65d13a2784041178e96b9790">SFLOAT</a> cgmCalibration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The most current calibration value. </p>

</div>
</div>
<a class="anchor" id="ga2043926e8a2d9252f872c7e19c1b0cc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a>* cgmCaliDB</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to the calibration record database. </p>

</div>
</div>
<a class="anchor" id="gaed9696ea02a7686a3860c07eea8b4e65"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8 cgmCaliDBCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of records being stored into the database. </p>

</div>
</div>
<a class="anchor" id="ga3f9584860ae5963a7c9908693c9ee4df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8 cgmCaliDBOldestIndx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointing to the oldest records in the circular buffer. </p>

</div>
</div>
<a class="anchor" id="ga57a0e51cc7eef0f0f54699b49b19c001"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8 cgmCaliDBRecordNum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The record number of the most recently stored calibration data record. </p>

</div>
</div>
<a class="anchor" id="gadedda7a8dbf1586601e2c9c9a8369c5f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8 cgmCaliDBWriteIndx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointing to the next calibration record to write. </p>

</div>
</div>
<a class="anchor" id="gad7c85c9b550d7b546d3bf7b2d2887789"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcgmCalibrationDataRecord__t.html">cgmCalibrationDataRecord_t</a> cgmCaliTmpRecord</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Temporary record for holding a calibration record. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 25 2015 11:39:13 for CGM Simulator by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
